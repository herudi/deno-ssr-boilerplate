var z=Object.defineProperty;var $t=Object.getOwnPropertyDescriptor;var jt=Object.getOwnPropertyNames;var St=Object.prototype.hasOwnProperty;var Ht=(t,e)=>{for(var s in e)z(t,s,{get:e[s],enumerable:!0})},$=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of jt(e))!St.call(t,o)&&(s||o!=="default")&&z(t,o,{get:()=>e[o],enumerable:!(r=$t(e,o))||r.enumerable});return t};var a={};Ht(a,{parseParamsFromPath:()=>T,tw:()=>Tt});function qt(t,e,s){let r=s.groups||{};if(!e||!t)return r;if(t.indexOf("*")!==-1){s.shift();let o=s.filter(i=>i!==void 0).filter(i=>i.startsWith("/")).join("").split("/");o.shift();let n={...r,wild:o.filter(i=>i!=="")};if(t==="*"||t.indexOf("/*")!==-1)return n;let l=t.split("/").find(i=>i.startsWith(":")&&i.endsWith("*"));return l&&(l=l.slice(1,-1),n[l]=[n[l]].concat(n.wild).filter(i=>i!==""),delete n.wild),n}return r}function kt(t){try{return decodeURI(t)}catch{return t}}function B(t,e){try{if(e=kt(e),t instanceof RegExp)return t.test(e)?t.exec(e)?.groups||{}:void 0;let s=!1,r=t.replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/(\/?)\*/g,(l,i)=>(s=!0,`(${i}.*)?`)).replace(/\.(?=[\w(])/,"\\."),o=new RegExp(`^${r}/*$`);if(!o.test(e))return;let n=o.exec(e);return n?qt(t,s,n):void 0}catch{return}}$(a,ue);import*as ue from"https://cdn.skypack.dev/nano-jsx@v0.0.30-dev.1?dts";import{tw as Tt}from"https://cdn.skypack.dev/twind@0.16.16";var T=t=>B(t,location.pathname)||{};import{Helmet as At,renderSSR as Dt}from"https://cdn.skypack.dev/nano-jsx@v0.0.30-dev.1?dts";import{setup as Ot}from"https://cdn.skypack.dev/twind@0.16.16";import{getStyleTag as Nt,virtualSheet as It}from"https://cdn.skypack.dev/twind@0.16.16/sheets";import Wt from"https://cdn.skypack.dev/@twind/typography@0.0.2";var Q=null;function X(t={}){return Q??(Q=Ft(t))}function Ft(t){let e=It();return Ot({...t,sheet:e,plugins:{...Wt()}}),e}var Bt=({body:t,head:e,footer:s,styleTag:r})=>`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    ${e.join(`
    `)}
    ${r}
  </head>
  <body>
    ${t}
    ${s.join(`
    `)}
  </body>
<html>
`;function j(t,e,s=200){X(e?.tw??{}).reset();let r=Dt(t,e),{body:o,head:n,footer:l}=At.SSR(r),i=Nt(X());return new Response(Bt({body:o,head:n,footer:l,styleTag:i}),{headers:{"content-type":"text/html"},status:s})}import{expressMiddleware as ve,HttpError as Pe,HttpResponse as Re,JsonResponse as _e,multipart as Ee,NHttp as Z,Router as tt}from"https://deno.land/x/nhttp@1.1.10/mod.ts";import ie from"https://deno.land/x/static_files@1.1.6/mod.ts";import{refresh as le}from"https://deno.land/x/refresh@1.0.0/mod.ts";import{h as P,Helmet as Ut}from"./_core/deps/nano_jsx.ts";import{h as d,Router as Lt,tw as f}from"./_core/deps/nano_jsx.ts";var{Link:L}=Lt,U="bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium",C="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium";function et({route:t}){return d("nav",{class:f`bg-gray-800 sticky top-0 z-10`},d("div",{class:f`max-w-7xl mx-auto px-2 sm:px-6 lg:px-8`},d("div",{class:f`relative flex items-center justify-between h-16`},d("div",{class:f`flex-1 flex items-center justify-center sm:items-stretch sm:justify-start`},d("div",{class:f`sm:block sm:ml-6`},d("div",{class:f`flex space-x-4`},d(L,{class:f`${t.pathname==="/"?U:C}`,to:"/"},"Home"),d(L,{class:f`${t.pathname.startsWith("/blog")?U:C}`,to:"/blog"},"Blog"),d(L,{class:f`${t.pathname==="/about"?U:C}`,to:"/about"},"About")))))))}function Ct({Component:t,props:e}){return P("div",null,P(Ut,{head:!0},P("link",{rel:"icon",href:"data:,"}),P("link",{href:"https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css",rel:"stylesheet"})),P(et,{...e}),P(t,{...e}))}var A=Ct;import{h as S,Helmet as Gt,tw as st}from"./_core/deps/nano_jsx.ts";function rt(t){return S("div",null,S(Gt,null,S("title",null,t.title)),S("div",{class:st`bg-white flex h-screen`},S("h1",{class:st`text-5xl text-green-600 m-auto mt-20`},t.title||"loading...")))}rt.initProps=async t=>t.isServer?await t.handler("/api/about.ts"):await(await fetch(t.getBaseUrl()+"/api/about")).json();var ot=rt;import{h as p,Helmet as Jt,Router as Mt,tw as m}from"./_core/deps/nano_jsx.ts";import at from"https://esm.sh/nprogress?no-check";var{Link:nt}=Mt;function it({data:t,isServer:e}){return e||window.scrollTo(0,0),p("div",null,p(Jt,{head:!0},p("title",null,"Hello Blog Page")),p("div",{class:m`bg-white min-h-screen`},p("main",{class:m`max-w-5xl mx-auto px-4 pb-28 sm:px-6 md:px-8 xl:px-12 xl:max-w-6xl`},p("header",{class:m`pt-10 pb-9 sm:pb-16 sm:text-center`},p("h1",{class:m`mb-4 text-3xl sm:text-4xl tracking-tight font-extrabold`},"Blog"),p("p",{class:m`text-lg`},"Example blog page with dummy data")),p("div",{class:m`space-y-16`},t&&t.map(s=>p("article",{class:m`relative flex flex-col max-w-3xl lg:ml-auto xl:max-w-none xl:w-[50rem]`},p("h3",{class:m`mb-4 text-xl tracking-tight font-bold`},p(nt,{to:"/blog/"+s.title},s.title)),p("div",{class:m`mb-6`},p("p",null,s.body)),p("div",{class:m`mt-auto flex flex-row-reverse items-center justify-end`},p("div",{class:m`text-sm leading-6 lg:absolute lg:top-0 lg:right-full lg:mr-8 lg:whitespace-nowrap`},"January, 12 2030"),p(nt,{to:"/blog/"+s.title,class:m`px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100`},"Read More"))))))))}it.initProps=async t=>{let e;return t.isServer?e=await t.handler("/api/blog/index.ts"):(at.start(),e=await(await fetch(t.getBaseUrl()+"/api/blog")).json(),at.done()),{data:e}};var lt=it;import{h as c,Helmet as Vt,Router as Yt,tw as R}from"./_core/deps/nano_jsx.ts";import pt from"https://esm.sh/nprogress?no-check";var{Link:Kt}=Yt;function mt({data:t,isServer:e,getParams:s}){let r=s();return e||window.scrollTo(0,0),c("div",null,c(Vt,null,c("title",null,r.title)),c("div",{class:R`bg-white flex h-screen`},c("div",{class:R`max-w-5xl mx-auto px-4 pb-28 mt-10 sm:px-6 md:px-8 xl:px-12 xl:max-w-6xl`},t&&c("div",null,c("div",{class:R`text-sm sm:text-center`},"January, 12 2030"),c("h1",{class:R`col-span-full text-3xl sm:text-4xl sm:text-center xl:mb-16 font-extrabold tracking-tight`},r.title),c("p",{class:R`mb-20`},t.body),c(Kt,{to:"/blog",class:R`px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100`},"Back")))))}mt.initProps=async t=>{let e;return t.isServer?e=await t.handler("/api/blog/[title].ts"):(pt.start(),e=await fetch(t.getBaseUrl()+"/api/blog/"+t.params.title),e=await e.json(),pt.done()),{data:e[0]||{}}};var ct=mt;import{Component as zt,h as u,Helmet as Qt,tw as _}from"./_core/deps/nano_jsx.ts";var ut={button:"text-2xl px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100"},dt=class extends zt{value=0;changeValue(e){this.value+=e,this.update()}render(){return u("div",null,u(Qt,null,u("title",null,"Hello Home")),u("div",{class:_`bg-white flex justify-center h-screen`},u("div",null,u("h3",{class:_`text-5xl text-center mt-20 mb-20 text-gray-600`},"Counter App"),u("div",{class:_`text-center`},u("button",{class:_`${ut.button}`,onClick:()=>this.changeValue(1)},"+"),u("span",{class:_`p-5 text-2xl text-sm font-semibold text-blue-800`},this.value),u("button",{class:_`${ut.button}`,onClick:()=>this.changeValue(-1)},"-")))))}},ft=dt;var H=[{path:"/about",page:ot},{path:"/blog",page:lt},{path:"/blog/:title",page:ct},{path:"/",page:ft}];import{h,tw as b}from"./_core/deps/nano_jsx.ts";function Xt({message:t}){return h("div",{class:b`flex items-center justify-center w-screen h-screen`},h("div",{class:b`px-40 py-20 bg-white rounded-md`},h("div",{class:b`flex flex-col items-center`},h("h1",{class:b`font-bold text-blue-600 text-9xl`},"404"),h("h6",{class:b`mb-2 text-2xl font-bold text-center text-gray-800 md:text-3xl`},h("span",{class:"text-red-500"},"Oops!")," Page not found"),h("p",{class:b`mb-8 text-center text-gray-500 md:text-lg`},t||"not found"),h("a",{href:"/",class:b`px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100`},"Go home"))))}var D=Xt;var{Switch:Zt,Route:te}=a.Router,ee=({initData:t})=>(0,a.h)(Zt,{fallback:()=>(0,a.h)(D,null)},H.map(({path:e,page:s})=>{let r=s;return(0,a.h)(te,{exact:!0,path:e},()=>{let o={status:!1};return class extends a.Component{route={url:location.pathname+location.search,pathname:location.pathname,path:e};getParams(){if(o.status)return o.params;let n=T(e);return o.status===!1&&(o={status:!0,params:n}),n}_props={};status=!1;async didMount(){if(this.status&&r.initProps){if(o.status===!1){let l=T(e);o={status:!0,params:l}}let n=await r.initProps({isServer:!1,params:o.params,pathname:location.pathname,path:location.pathname,url:location.pathname+location.search,getBaseUrl:()=>location.origin});this.update(n)}}render(n){let l=this.route,i=this.getParams;return n?(0,a.h)(A,{Component:r,props:{...n,route:l,getParams:i,isServer:!1}}):(window.__INIT_DATA__?(this._props=t,delete window.__INIT_DATA__):this.status||(this.status=!0),(0,a.h)(A,{Component:r,props:{...this._props,route:l,getParams:i,isServer:!1}}))}}})})),se=({Page:t,initData:e,route:s,getParams:r,timestamp:o,env:n,isServer:l})=>l?(0,a.h)("div",{id:"root"},(0,a.h)(a.Helmet,{footer:!0},n==="development"&&(0,a.h)("script",{src:"/assets/js/refresh_client.js"}),e&&(0,a.h)("script",null,"window.__INIT_DATA__ = ",JSON.stringify(e)),(0,a.h)("script",{async:!0,src:"/assets/hydrate.js?v="+o})),(0,a.h)(A,{Component:t,props:{...e,route:s,getParams:r,isServer:l}})):(0,a.h)("div",{id:"root"},(0,a.h)(ee,{initData:e})),G=se;import{join as J,resolve as gt,toFileUrl as M}from"https://deno.land/std@0.126.0/path/mod.ts";import{walk as xt}from"https://deno.land/std@0.126.0/fs/walk.ts";var wt="95d6aa06f620",ht="01a2929d18cf";async function bt(t,e,s){let r=e+"/src/pages",o=!1,n=!1;for(let l=0;l<t.length;l++){let i=t[l],x=(await Deno.stat(J(r,i))).mtime?.getTime();s[i]||(s[i]=x,n||(n=!0)),s[i]!==x&&(s[i]=x,o||(o=!0))}return{storage:s,status:o,new_entry:n}}function yt(t){let e=t.substring(0,t.lastIndexOf("."));return e.endsWith("/index")&&(e=e.substring(0,e.lastIndexOf("/index"))),e===""&&(e="/"),e="/"+e.split("/").reduce((s,r)=>r.startsWith("[...")&&r.endsWith("]")?s+"/:"+r.slice(4,r.length-1)+"*":r.startsWith("[")&&r.endsWith("]")?s+"/:"+r.slice(1,r.length-1):r,""),e}function vt(t,e){return e==="page"?`
${t.map((s,r)=>`import $${r} from "../src/pages${s}";`).join(`
`)}
export default [
  ${t.map((s,r)=>`{ 
    path: '${yt(s)}',
    page: $${r}
  },`).join(`
  `)}
];
`:`
import { Router, Handler } from "./deps/nhttp.ts";
import { RequestEvent } from "./deps/types.ts";
${t.map((s,r)=>`import $${r} from "../src/pages${s}";`).join(`
`)}
const api = new Router<RequestEvent>();
const map = {} as Record<string, Handler<RequestEvent>>;
  ${t.map((s,r)=>{let o=yt(s);return`
map['${s}'] = $${r};
api.any('${o}', $${r});`}).join(`
  `)}
export default { api, map };
`}async function Pt(t=!1,e=Deno.cwd()){try{e=gt(e);let s=JSON.parse(localStorage.getItem(wt)||"{}"),r=JSON.parse(localStorage.getItem(ht)||"{}"),o=[],n=[],l=J(e,"./src/pages"),i=M(l),K=xt(l,{includeDirs:!1,includeFiles:!0,exts:["tsx","jsx","ts","js"]});for await(let v of K)if(v.isFile){let w=M(v.path).href.substring(i.href.length);w.startsWith("/_app.")||(w.startsWith("/api/")?n.push(w):o.push(w))}let x=await bt(o,e,s),k=await bt(n,e,r);if((x.new_entry||x.status||t)&&localStorage.setItem(wt,JSON.stringify(x.storage)),(k.new_entry||k.status||t)&&localStorage.setItem(ht,JSON.stringify(k.storage)),x.status||t){let v=vt(o,"page"),w=e+"/_core/pages.ts";await Deno.writeTextFile(w,v)}if(k.status||t){let v=vt(n,"api"),w=e+"/_core/apis.ts";await Deno.writeTextFile(w,v)}}catch(s){return console.log(s),s}}import{HttpError as re}from"./_core/deps/nhttp.ts";async function O(t){if(t.request.method=="GET")return{title:"Welcome About From Api"};throw new re(405,"method not allowed")}import{HttpError as oe}from"./_core/deps/nhttp.ts";async function N(t){if(t.request.method=="GET")return await(await fetch("https://jsonplaceholder.typicode.com/posts?_limit=10")).json();throw new oe(405,"method not allowed")}import{HttpError as ae}from"./_core/deps/nhttp.ts";async function I(t){if(t.request.method=="GET")return await(await fetch(`https://jsonplaceholder.typicode.com/posts?title=${t.params.title}`)).json();throw new ae(405,"method not allowed")}var W=new tt,F={};F["/api/about.ts"]=O;W.any("/about",O);F["/api/blog/index.ts"]=N;W.any("/blog",N);F["/api/blog/[title].ts"]=I;W.any("/blog/:title",I);var V={api:W,map:F};import{h as y,tw as E}from"./_core/deps/nano_jsx.ts";function ne({message:t,status:e}){return y("div",{class:E`flex items-center justify-center w-screen h-screen`},y("div",{class:E`px-40 py-20 bg-white rounded-md`},y("div",{class:E`flex flex-col items-center`},y("h1",{class:E`font-bold text-blue-600 text-9xl`},e||500),y("h6",{class:E`mb-2 text-2xl font-bold text-center text-gray-800 md:text-3xl`},y("span",{class:"text-red-500"},"Oops!")," Error"),y("p",{class:E`mb-8 text-center text-gray-500 md:text-lg`},t||"something went wrong"))))}var Rt=ne;var _t=new Date().getTime(),q=(Deno.args||[]).includes("--dev")?"development":"production",Y,g=new Z({env:q});if(q==="development"){try{await Deno.remove(Deno.cwd()+"/public/hydrate.js")}catch{}await Pt();let t={check:!1,bundle:"module",compilerOptions:{lib:["dom","dom.iterable","esnext"],jsxFactory:"h",jsxFragmentFactory:"Fragment"},importMapPath:"./import_map.json"};Y=await Deno.emit("./_core/hydrate.tsx",t);let e=le({paths:"./src/pages/"});g.use((s,r)=>{let o=e(s.request);return o||r()})}g.use("/assets",ie("public"));g.use((t,e)=>(t.getBaseUrl=()=>new URL(t.request.url).origin,t.isServer=!0,t.env=q,t.pathname=t.path,t.handler=async s=>(s.startsWith("/")||(s="/"+s),await V.map[s](t,e)),t.render=(s,r)=>j((0,a.h)(G,{isServer:!0,env:q,timestamp:_t,initData:r.initData||{},Page:s,getParams:()=>t.params,route:{url:t.url,pathname:t.path,path:r.path}})),e()));for(let t=0;t<H.length;t++){let e=H[t];g.get(e.path,async s=>{s.getBaseUrl=()=>new URL(s.request.url).origin;let r=e.page,o=r.initProps?await r.initProps(s):{};return j((0,a.h)(G,{isServer:!0,env:q,timestamp:_t,initData:o,Page:r,getParams:()=>s.params,route:{url:s.url,pathname:s.path,path:e.path}}))})}Y&&g.get("/assets/hydrate.js",({response:t})=>(t.type("application/javascript"),Y.files["deno:///bundle.js"]));g.use("/api",V.api);g.on404(t=>t.path.startsWith("/api/")?{status:404,message:`route ${t.url} not found`}:j(()=>(0,a.h)(D,{message:`route ${t.url} not found`,status:404}),void 0,404));g.onError((t,e)=>{let s=e.response.status();return e.path.startsWith("/api/")?{status:s,message:t.message}:j(()=>(0,a.h)(Rt,{message:t.message,status:s}),void 0,s)});var Et=g;Et.listen(8080,()=>{console.log("> running on port 8080")});
