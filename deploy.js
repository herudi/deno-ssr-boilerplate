var Q=Object.defineProperty;var Ht=Object.getOwnPropertyDescriptor;var qt=Object.getOwnPropertyNames;var Tt=Object.prototype.hasOwnProperty;var kt=(t,e)=>{for(var r in e)Q(t,r,{get:e[r],enumerable:!0})},E=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of qt(e))!Tt.call(t,o)&&(r||o!=="default")&&Q(t,o,{get:()=>e[o],enumerable:!(s=Ht(e,o))||s.enumerable});return t};var n={};kt(n,{parseParamsFromPath:()=>F,tw:()=>It});function At(t,e,r){let s=r.groups||{};if(!e||!t)return s;if(t.indexOf("*")!==-1){r.shift();let o=r.filter(i=>i!==void 0).filter(i=>i.startsWith("/")).join("").split("/");o.shift();let a={...s,wild:o.filter(i=>i!=="")};if(t==="*"||t.indexOf("/*")!==-1)return a;let l=t.split("/").find(i=>i.startsWith(":")&&i.endsWith("*"));return l&&(l=l.slice(1,-1),a[l]=[a[l]].concat(a.wild).filter(i=>i!==""),delete a.wild),a}return s}function Dt(t){try{return decodeURI(t)}catch{return t}}function W(t,e){try{if(e=Dt(e),t instanceof RegExp)return t.test(e)?t.exec(e)?.groups||{}:void 0;let r=!1,s=t.replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/(\/?)\*/g,(l,i)=>(r=!0,`(${i}.*)?`)).replace(/\.(?=[\w(])/,"\\."),o=new RegExp(`^${s}/*$`);if(!o.test(e))return;let a=o.exec(e);return a?At(t,r,a):void 0}catch{return}}E(n,xe);import*as xe from"https://deno.land/x/nano_jsx@v0.0.30/mod.ts";import{tw as It}from"https://cdn.skypack.dev/twind@0.16.16";var F=t=>W(t,location.pathname)||{};import{Helmet as Nt,renderSSR as Ot}from"https://deno.land/x/nano_jsx@v0.0.30/mod.ts";import{setup as Lt}from"https://cdn.skypack.dev/twind@0.16.16";import{getStyleTag as Wt,virtualSheet as Ft}from"https://cdn.skypack.dev/twind@0.16.16/sheets";import Bt from"https://cdn.skypack.dev/@twind/typography@0.0.2";var X=null;function Z(t={}){return X??(X=Ut(t))}function Ut(t){let e=Ft();return Lt({...t,sheet:e,plugins:{...Bt()}}),e}var Ct=({body:t,head:e,footer:r,styleTag:s,clientScript:o,env:a,initData:l,tt:i})=>`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    ${e.join(`
    `)}
    ${s}
  </head>
  <body>
    ${t}
    ${r.join(`
    `)}
    <script>window.__INIT_DATA__ = ${JSON.stringify(l)}<\/script>${a==="development"?'<script src="/assets/js/refresh_client.js"><\/script>':""}<script async src="${o+"?v="+i}"><\/script>
  </body>
<html>
`;function T(t,e={}){Z(e.tw??{}).reset();let r=Ot(t,e),{body:s,head:o,footer:a}=Nt.SSR(r),l=Wt(Z());return new Response(Ct({...e,body:s,head:o,footer:a,styleTag:l}),{headers:{"content-type":"text/html"},status:e.status||200})}import{expressMiddleware as $e,HttpError as Ee,HttpResponse as je,JsonResponse as Se,multipart as He,NHttp as tt,Router as et}from"https://deno.land/x/nhttp@1.1.10/mod.ts";import me from"https://deno.land/x/static_files@1.1.6/mod.ts";import{refresh as ce}from"https://deno.land/x/refresh@1.0.0/mod.ts";import{h as R,Helmet as Jt}from"./_core/deps/nano_jsx.ts";import{h as d,Router as Gt,tw as f}from"./_core/deps/nano_jsx.ts";var{Link:B}=Gt,U="bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium",C="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium";function G({route:t}){return d("nav",{class:f`bg-gray-800 sticky top-0 z-10`},d("div",{class:f`max-w-7xl mx-auto px-2 sm:px-6 lg:px-8`},d("div",{class:f`relative flex items-center justify-between h-16`},d("div",{class:f`flex-1 flex items-center justify-center sm:items-stretch sm:justify-start`},d("div",{class:f`sm:block sm:ml-6`},d("div",{class:f`flex space-x-4`},d(B,{class:f`${t.pathname==="/"?U:C}`,to:"/"},"Home"),d(B,{class:f`${t.pathname.startsWith("/blog")?U:C}`,to:"/blog"},"Blog"),d(B,{class:f`${t.pathname==="/about"?U:C}`,to:"/about"},"About")))))))}function Mt({Component:t,props:e}){return R("div",null,R(Jt,{head:!0},R("link",{rel:"icon",href:"data:,"}),R("link",{href:"https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css",rel:"stylesheet"})),R(G,{...e}),R(t,{...e}))}var J=Mt;import{h as j,Helmet as Vt,tw as rt}from"./_core/deps/nano_jsx.ts";function st(t){return j("div",null,j(Vt,null,j("title",null,t.title)),j("div",{class:rt`bg-white flex h-screen`},j("h1",{class:rt`text-5xl text-green-600 m-auto mt-20`},t.title||"loading...")))}st.initProps=async t=>t.isServer?await t.handler("/api/about.ts"):await(await fetch(t.getBaseUrl()+"/api/about")).json();var ot=st;import{h as p,Helmet as Yt,Router as Kt,tw as m}from"./_core/deps/nano_jsx.ts";import it from"https://esm.sh/nprogress?no-check";import{h as nt,tw as at}from"./_core/deps/nano_jsx.ts";function S(){return nt("div",{class:at`bg-white min-h-screen`},nt("h1",{class:at`text-center mt-20 mb-4 text-3xl sm:text-4xl`},"Loading..."))}var{Link:lt}=Kt;function pt({data:t}){return t?p("div",null,p(Yt,{head:!0},p("title",null,"Hello Blog Page")),p("div",{class:m`bg-white min-h-screen`},p("main",{class:m`max-w-5xl mx-auto px-4 pb-28 sm:px-6 md:px-8 xl:px-12 xl:max-w-6xl`},p("header",{class:m`pt-10 pb-9 sm:pb-16 sm:text-center`},p("h1",{class:m`mb-4 text-3xl sm:text-4xl tracking-tight font-extrabold`},"Blog"),p("p",{class:m`text-lg`},"Example blog page with dummy data")),p("div",{class:m`space-y-16`},t.map(e=>p("article",{class:m`relative flex flex-col max-w-3xl lg:ml-auto xl:max-w-none xl:w-[50rem]`},p("h3",{class:m`mb-4 text-xl tracking-tight font-bold`},p(lt,{to:"/blog/"+e.title},e.title)),p("div",{class:m`mb-6`},p("p",null,e.body)),p("div",{class:m`mt-auto flex flex-row-reverse items-center justify-end`},p("div",{class:m`text-sm leading-6 lg:absolute lg:top-0 lg:right-full lg:mr-8 lg:whitespace-nowrap`},"January, 12 2030"),p(lt,{to:"/blog/"+e.title,class:m`px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100`},"Read More")))))))):p(S,null)}pt.initProps=async t=>{let e;return t.isServer?e=await t.handler("/api/blog/index.ts"):(it.start(),e=await(await fetch(t.getBaseUrl()+"/api/blog")).json(),it.done(),window.scrollTo(0,0)),{data:e}};var mt=pt;import{h as c,Helmet as zt,Router as Qt,tw as P}from"./_core/deps/nano_jsx.ts";import ct from"https://esm.sh/nprogress?no-check";var{Link:Xt}=Qt;function ut({data:t,params:e}){return t?c("div",null,c(zt,null,c("title",null,e.title)),c("div",{class:P`bg-white flex h-screen`},c("div",{class:P`max-w-5xl mx-auto px-4 pb-28 mt-10 sm:px-6 md:px-8 xl:px-12 xl:max-w-6xl`},c("div",null,c("div",{class:P`text-sm sm:text-center`},"January, 12 2030"),c("h1",{class:P`col-span-full text-3xl sm:text-4xl sm:text-center xl:mb-16 font-extrabold tracking-tight`},e.title),c("p",{class:P`mb-20`},t.body),c(Xt,{to:"/blog",class:P`px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100`},"Back"))))):c(S,null)}ut.initProps=async t=>{let e;return t.isServer?e=await t.handler("/api/blog/[title].ts"):(ct.start(),e=await fetch(t.getBaseUrl()+"/api/blog/"+t.params.title),e=await e.json(),ct.done(),window.scrollTo(0,0)),{data:e[0]||{},params:t.params}};var dt=ut;import{Component as Zt,h as u,Helmet as te,tw as _}from"./_core/deps/nano_jsx.ts";var ft={button:"text-2xl px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100"},gt=class extends Zt{value=0;changeValue(e){this.value+=e,this.update()}render(){return u("div",null,u(te,null,u("title",null,"Hello Home")),u("div",{class:_`bg-white flex justify-center h-screen`},u("div",null,u("h3",{class:_`text-5xl text-center mt-20 mb-20 text-gray-600`},"Counter App"),u("div",{class:_`text-center`},u("button",{class:_`${ft.button}`,onClick:()=>this.changeValue(1)},"+"),u("span",{class:_`p-5 text-2xl text-sm font-semibold text-blue-800`},this.value),u("button",{class:_`${ft.button}`,onClick:()=>this.changeValue(-1)},"-")))))}},xt=gt;var H=[{path:"/about",page:ot},{path:"/blog",page:mt},{path:"/blog/:title",page:dt},{path:"/",page:xt}];import{h as b,tw as h}from"./_core/deps/nano_jsx.ts";function ee({message:t}){return b("div",{class:h`flex items-center justify-center w-screen h-screen`},b("div",{class:h`px-40 py-20 bg-white rounded-md`},b("div",{class:h`flex flex-col items-center`},b("h1",{class:h`font-bold text-blue-600 text-9xl`},"404"),b("h6",{class:h`mb-2 text-2xl font-bold text-center text-gray-800 md:text-3xl`},b("span",{class:"text-red-500"},"Oops!")," Page not found"),b("p",{class:h`mb-8 text-center text-gray-500 md:text-lg`},t||"not found"),b("a",{href:"/",class:h`px-6 py-2 text-sm font-semibold text-blue-800 bg-blue-100`},"Go home"))))}var k=ee;var{Switch:re,Route:se}=n.Router,oe=()=>(0,n.h)(re,{fallback:()=>(0,n.h)(k,null)},H.map(({path:t,page:e})=>{let r=e;return(0,n.h)(se,{exact:!0,path:t},()=>class extends n.Component{route={url:location.pathname+location.search,pathname:location.pathname,path:t};init_data=window.__INIT_DATA__;async didMount(){if(window.__INIT_DATA__&&(window.__INIT_DATA__=void 0),!this.init_data&&r.initProps){let s=await r.initProps({isServer:!1,params:F(t)||{},pathname:location.pathname,path:location.pathname,url:location.pathname+location.search,getBaseUrl:()=>location.origin});this.update(s)}}render(s){let o=this.route,a=s||this.init_data||{};return(0,n.h)(J,{Component:r,props:{...a,route:o,isServer:!1}})}})})),ne=({Page:t,initData:e,route:r,getParams:s,isServer:o})=>o?(0,n.h)("div",{id:"root"},(0,n.h)(J,{Component:t,props:{...e,route:r,getParams:s,isServer:o}})):(0,n.h)("div",{id:"root"},(0,n.h)(oe,null)),wt=ne;import{join as M,resolve as bt,toFileUrl as V}from"https://deno.land/std@0.126.0/path/mod.ts";import{walk as ht}from"https://deno.land/std@0.126.0/fs/walk.ts";var yt="95d6aa06f620",vt="01a2929d18cf";async function Rt(t,e,r){let s=e+"/src/pages",o=!1,a=!1;for(let l=0;l<t.length;l++){let i=t[l],x=(await Deno.stat(M(s,i))).mtime?.getTime();r[i]||(r[i]=x,a||(a=!0)),r[i]!==x&&(r[i]=x,o||(o=!0))}return{storage:r,status:o,new_entry:a}}function Pt(t){let e=t.substring(0,t.lastIndexOf("."));return e.endsWith("/index")&&(e=e.substring(0,e.lastIndexOf("/index"))),e===""&&(e="/"),e="/"+e.split("/").reduce((r,s)=>s.startsWith("[...")&&s.endsWith("]")?r+"/:"+s.slice(4,s.length-1)+"*":s.startsWith("[")&&s.endsWith("]")?r+"/:"+s.slice(1,s.length-1):s,""),e}function _t(t,e){return e==="page"?`
${t.map((r,s)=>`import $${s} from "../src/pages${r}";`).join(`
`)}
export default [
  ${t.map((r,s)=>`{ 
    path: '${Pt(r)}',
    page: $${s}
  },`).join(`
  `)}
];
`:`
import { Router, Handler } from "./deps/nhttp.ts";
import { RequestEvent } from "./deps/types.ts";
${t.map((r,s)=>`import $${s} from "../src/pages${r}";`).join(`
`)}
const api = new Router<RequestEvent>();
const map = {} as Record<string, Handler<RequestEvent>>;
  ${t.map((r,s)=>{let o=Pt(r);return`
map['${r}'] = $${s};
api.any('${o}', $${s});`}).join(`
  `)}
export default { api, map };
`}async function $t(t=!1,e=Deno.cwd()){try{e=bt(e);let r=JSON.parse(localStorage.getItem(yt)||"{}"),s=JSON.parse(localStorage.getItem(vt)||"{}"),o=[],a=[],l=M(e,"./src/pages"),i=V(l),z=ht(l,{includeDirs:!1,includeFiles:!0,exts:["tsx","jsx","ts","js"]});for await(let v of z)if(v.isFile){let w=V(v.path).href.substring(i.href.length);w.startsWith("/_app.")||(w.startsWith("/api/")?a.push(w):o.push(w))}let x=await Rt(o,e,r),q=await Rt(a,e,s);if((x.new_entry||x.status||t)&&localStorage.setItem(yt,JSON.stringify(x.storage)),(q.new_entry||q.status||t)&&localStorage.setItem(vt,JSON.stringify(q.storage)),x.status||t){let v=_t(o,"page"),w=e+"/_core/pages.ts";await Deno.writeTextFile(w,v)}if(q.status||t){let v=_t(a,"api"),w=e+"/_core/apis.ts";await Deno.writeTextFile(w,v)}}catch(r){return console.log(r),r}}import{HttpError as ae}from"./_core/deps/nhttp.ts";async function A(t){if(t.request.method=="GET")return{title:"Welcome About From Api"};throw new ae(405,"method not allowed")}import{HttpError as ie}from"./_core/deps/nhttp.ts";async function D(t){if(t.request.method=="GET")return await(await fetch("https://jsonplaceholder.typicode.com/posts?_limit=10")).json();throw new ie(405,"method not allowed")}import{HttpError as le}from"./_core/deps/nhttp.ts";async function I(t){if(t.request.method=="GET")return await(await fetch(`https://jsonplaceholder.typicode.com/posts?title=${t.params.title}`)).json();throw new le(405,"method not allowed")}var N=new et,O={};O["/api/about.ts"]=A;N.any("/about",A);O["/api/blog/index.ts"]=D;N.any("/blog",D);O["/api/blog/[title].ts"]=I;N.any("/blog/:title",I);var Y={api:N,map:O};import{h as y,tw as $}from"./_core/deps/nano_jsx.ts";function pe({message:t,status:e}){return y("div",{class:$`flex items-center justify-center w-screen h-screen`},y("div",{class:$`px-40 py-20 bg-white rounded-md`},y("div",{class:$`flex flex-col items-center`},y("h1",{class:$`font-bold text-blue-600 text-9xl`},e||500),y("h6",{class:$`mb-2 text-2xl font-bold text-center text-gray-800 md:text-3xl`},y("span",{class:"text-red-500"},"Oops!")," Error"),y("p",{class:$`mb-8 text-center text-gray-500 md:text-lg`},t||"something went wrong"))))}var Et=pe;var jt="/assets/hydrates/app.js",ue=Date.now(),L=(Deno.args||[]).includes("--dev")?"development":"production",K,g=new tt({env:L});if(L==="development"){await $t();let t={check:!1,bundle:"module",compilerOptions:{lib:["dom","dom.iterable","esnext"],jsxFactory:"h",jsxFragmentFactory:"Fragment"},importMapPath:"./import_map.json"};K=await Deno.emit("./_core/hydrate.tsx",t);let e=ce({paths:"./src/pages/"});g.use((r,s)=>{let o=e(r.request);return o||s()})}g.use("/assets",me("public"));g.use((t,e)=>(t.getBaseUrl=()=>new URL(t.request.url).origin,t.isServer=!0,t.env=L,t.pathname=t.path,t.handler=async r=>(r.startsWith("/")||(r="/"+r),await Y.map[r](t,e)),t.render=(r,s)=>T((0,n.h)(wt,{isServer:!0,initData:s.initData||{},Page:r,getParams:()=>t.params,route:{url:t.url,pathname:t.path,path:s.path}}),{clientScript:jt,env:L,initData:s.initData||{},tt:ue}),e()));for(let t=0;t<H.length;t++){let e=H[t];g.get(e.path,async r=>{r.getBaseUrl=()=>new URL(r.request.url).origin;let s=e.page,o=s.initProps?await s.initProps(r):{};return r.render(s,{path:e.path,initData:o})})}K&&g.get(jt,({response:t})=>(t.type("application/javascript"),K.files["deno:///bundle.js"]));g.use("/api",Y.api);g.on404(t=>t.path.startsWith("/api/")?{status:404,message:`route ${t.url} not found`}:T((0,n.h)(k,{message:`route ${t.url} not found`,status:404}),{status:404}));g.onError((t,e)=>{let r=e.response.status();return e.path.startsWith("/api/")?{status:r,message:t.message}:T((0,n.h)(Et,{message:t.message,status:r}),{status:r})});var St=g;St.listen(8080,()=>{console.log("> running on port 8080")});
