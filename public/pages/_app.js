import{a as w}from"./chunk-SLXOEC57.js";import{a as P,b as r,d as _,e as $,f as d}from"./chunk-XBSBNYME.js";var x=[{path:"/blog",page:"./blog/index.js"},{path:"/blog/:title",page:"./blog/[title].js"},{path:"/",page:"./index.js"},{path:"/sign",page:"./sign.js"}],A="1646808121930";var{Link:b}=$,E="bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium",u="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium";function j({route:e}){return r("nav",{class:d`bg-gray-800 sticky top-0 z-10`},r("div",{class:d`max-w-7xl mx-auto px-2 sm:px-6 lg:px-8`},r("div",{class:d`relative flex items-center justify-between h-16`},r("div",{class:d`flex-1 flex items-center justify-center sm:items-stretch sm:justify-start`},r("div",{class:d`sm:block sm:ml-6`},r("div",{class:d`flex space-x-4`},r(b,{class:d`${e.pathname==="/"?E:u}`,to:"/"},"Home"),r(b,{class:d`${e.pathname.startsWith("/blog")?E:u}`,to:"/blog"},"Blog"),r(b,{class:d`${e.pathname==="/sign"?E:u}`,to:"/sign"},"Sign Form")))),r("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"},r("a",{class:d`${u}`,href:"https://github.com/herudi/deno-ssr-boilerplate",target:"__blank"},"Github")))))}function N({Component:e,props:t}){return r("div",null,r(_,null,r("html",{lang:"en"}),r("meta",{charset:"utf-8"}),r("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r("link",{rel:"icon",href:"data:,"}),r("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"}),r("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css",rel:"stylesheet"})),t.route.pathname==="/sign"||t.error?null:r(j,{route:t.route}),r(e,{...t}))}var R;N.event={onStart(e){e.NProgress=window.NProgress,e.isFirst||(R=setTimeout(()=>{e.NProgress.start()},300))},onEnd({NProgress:e}){R&&clearTimeout(R),e.done()},onError(e){console.error(e)}};var g=N;function k({Page:e,initData:t,route:a,isServer:o}){return r(g,{Component:e,props:{...t,route:a,isServer:o}})}k.initProps=g.initProps;k.event=g.event||{};var p=k;function q(e,t,a){let o=a.groups||{};if(!t)return o;if(e.indexOf("*")!==-1){a.shift();let i=a.filter(n=>n!==void 0).filter(n=>n.startsWith("/")).join("").split("/");i.shift();let s={...o,wild:i.filter(n=>n!=="")};if(e==="*"||e.indexOf("/*")!==-1)return s;let l=e.split("/").find(n=>n.startsWith(":")&&n.endsWith("*"));return l&&(l=l.slice(1,-1),s[l]=[s[l]].concat(s.wild).filter(n=>n!==""),delete s.wild),s}return o}function T(e){try{return decodeURI(e)}catch{return e}}var v=class{constructor(t={}){this.routes=[];this.id=t.id||"root",this.fallback=t.fallback||r(w,{message:"Not Found",status:404})}add(t,a){let o=!1,i=t.replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/(\/?)\*/g,(l,n)=>(o=!0,`(${n}.*)?`)).replace(/\.(?=[\w(])/,"\\."),s=new RegExp(`^${i}/*$`);return this.routes.push({path:t,fn:a,regex:s,wild:o}),this}find(t){let a,o={},i=0,s,l=this.routes,n=l.length;for(t=T(t);i<n;){if(s=l[i],s.regex.test(t)){let c=s.regex.exec(t);a=s.fn,o=q(s.path,s.wild,c);break}i++}return{fn:a,params:o}}handle(){let{pathname:t,search:a,origin:o}=window.location;if(this.current===t+a)return;let{fn:i,params:s}=this.find(t);this.current=t+a;let l=this.id,n={};if(n.pathname=t,n.url=this.current,n.path=t,n.isServer=!1,n.getBaseUrl=()=>o,n.params=s,n.fetchApi=async(c,h)=>{try{let m=await fetch(o+c,h);if(!m.ok)throw m;return{data:await m.json(),error:void 0}}catch(m){let f=await m.json();return f.message=T(f.message),{data:void 0,error:f}}},n.render=(c,h)=>{P(c,document.getElementById(h||l))},!i)return n.render(r(w,{message:"Not Found",status:404}));i(n)}resolve(){let t=()=>this.handle();t(),window.addEventListener("pushstate",a=>{a.preventDefault(),t()}),window.addEventListener("replacestate",a=>{a.preventDefault(),t()}),window.addEventListener("popstate",()=>{t()})}};async function L(e){return(await import(e+"?v="+A)).default}var y=!0;window.addEventListener("load",()=>{let e=document.getElementById("__INIT_DATA__");e&&(e=JSON.parse(e.textContent||"{}"));let t=new v;for(let a=0;a<x.length;a++){let o=x[a];t.add(o.path,async i=>{i.isFirst=y;try{let s={};y||(s=p.initProps?await p.initProps(i):{}),p.event.onStart!==void 0&&await p.event.onStart(i);let l=typeof o.page=="string"?await L(o.page):o.page,n=y?e||{}:l.initProps?await l.initProps(i):{};i.render(r(p,{Page:l,initData:{...n,...s},route:{pathname:i.pathname,url:i.url,path:o.path,params:i.params},isServer:!1})),p.event.onEnd!==void 0&&p.event.onEnd(i)}catch(s){p.event.onError!==void 0&&p.event.onError(s,i)}y=!1})}t.resolve()});
